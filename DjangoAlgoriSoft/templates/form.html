{% extends 'body.html' %} {% load widget_tweaks %} {% block content %}
<form method="post">
  <div class="card card-default">
    <div class="card-header">
      <h3 class="card-title">
        <i class="fas fa-plus"></i>
        {{title}}
      </h3>
    </div>
    <div class="card-body">
      {% if form.errors %}
      <div class="alert alert-danger alert-dismissible">
        <button
          type="button"
          class="close"
          data-dismiss="alert"
          aria-hidden="true"
        >
          ×
        </button>
        <h5><i class="icon fas fa-ban"></i> Ha ocurrido un error al querer guardar el registro</h5>
        <ul>
          {% comment %} Recorro mis componentes {% endcomment %}
        {% for field in form %}
        {% comment %} recorro cada field para mirar si tiene erroes e imprimirlos {% endcomment %}
        {% for error in field.errors %}
        <li>{{error}}</li>
        {% endfor %}
        {% endfor %}
        </ul>
        
      </div>
      {% endif %} {% csrf_token %} {% for field in form.visible_fields %}
      <div class="form-group">
        <label for="">{{field.label}}:</label>
        {{field|add_class:'form-control'|attr:'autocomplete:off'|attr:'autofocus'}}
      </div>
      {% endfor %}

      <div class="cad-footer">
        <button type="submit" class="btn btn-primary" id="btnTest">
          <i class="fas fa-save"></i>
          Guardar registro
        </button>
      </div>
    </div>
  </div>
</form>
{% endblock content %}
{% block js %}
  <script>
    {% if form.errors %}
      let errors = '';
      {% for field in form %}
        {% for error in field.errors %}
          errors += '{{error}}\n';
        {% endfor %}
      {% endfor %}
    Swal.fire({
      title:'!Error¡',
      text:errors,
      icon:'error'
    })
    {% endif %}
  </script>
{% endblock js %}
          
